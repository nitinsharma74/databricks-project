{
  "version": "1.0",
  "datasets": [
    {
      "name": "rank_trend",
      "query": "SELECT title, load_date, position FROM workspace.default.deezer_top_tracks_daily WHERE DATE(load_date) >= DATE_SUB(CURRENT_DATE(), 30)"
    },
    {
      "name": "artist_frequency",
      "query": "SELECT artist_name, COUNT(*) AS appearances FROM workspace.default.deezer_top_tracks_daily WHERE DATE(load_date) >= DATE_SUB(CURRENT_DATE(), 30) GROUP BY artist_name"
    },
    {
      "name": "duration_distribution",
      "query": "SELECT duration FROM workspace.default.deezer_top_tracks_daily WHERE DATE(load_date) >= DATE_SUB(CURRENT_DATE(), 30)"
    },
    {
      "name": "explicit_breakdown",
      "query": "SELECT explicit_lyrics, COUNT(*) AS total_tracks FROM workspace.default.deezer_top_tracks_daily WHERE DATE(load_date) >= DATE_SUB(CURRENT_DATE(), 30) GROUP BY explicit_lyrics"
    }
  ],
  "pages": [
    {
      "name": "Overview",
      "widgets": [
        {
          "type": "line",
          "title": "Rank Trends (Last 30 Days)",
          "dataset": "rank_trend",
          "x": "load_date",
          "y": "position"
        },
        {
          "type": "bar",
          "title": "Top Artists by Appearances",
          "dataset": "artist_frequency",
          "x": "artist_name",
          "y": "appearances"
        },
        {
          "type": "histogram",
          "title": "Track Duration Distribution",
          "dataset": "duration_distribution",
          "x": "duration"
        },
        {
          "type": "pie",
          "title": "Explicit vs Clean Tracks",
          "dataset": "explicit_breakdown",
          "label": "explicit_lyrics",
          "value": "total_tracks"
        }
      ]
    }
  ]
}
